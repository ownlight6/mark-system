"use strict";(self["webpackChunkmark_system"]=self["webpackChunkmark_system"]||[]).push([[652],{2652:function(e,n,a){a.r(n),a.d(n,{default:function(){return N}});var t=a(8222);const s={class:"initContainer"},c={class:"header"},o=(0,t._)("div",{class:"title"},"标注系统",-1),i={class:"selectContainer"},l={class:"docBox"},d=(0,t._)("div",{class:"title"},"选择文件",-1),r={class:"docSelect"},u={key:0,class:"docBox"},p=(0,t._)("div",{class:"title"},"选择标注",-1),h={class:"docSelect"},m=(0,t._)("div",{class:"backImg"},null,-1);function k(e,n,a,k,g,f){const C=(0,t.up)("el-button"),N=(0,t.up)("el-tree");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("div",c,[o,(0,t.Wm)(C,{type:"primary",onClick:n[0]||(n[0]=e=>f.clickUpload())},{default:(0,t.w5)((()=>[(0,t.Uk)("上传文件")])),_:1}),(0,t._)("input",{ref:"file",type:"file",style:{display:"none"},onChange:n[1]||(n[1]=(...e)=>f.onChange&&f.onChange(...e))},null,544)]),(0,t._)("div",i,[(0,t._)("div",l,[d,(0,t._)("div",r,[(0,t.Wm)(N,{class:"docTree",data:g.docMenu,props:g.docProp,onNodeClick:f.docNodeClick},null,8,["data","props","onNodeClick"])])]),g.annMenu.length?((0,t.wg)(),(0,t.iD)("div",u,[p,(0,t._)("div",h,[(0,t.Wm)(N,{class:"docTree",data:g.annMenu,props:g.docProp,onNodeClick:f.annNodeClick},null,8,["data","props","onNodeClick"])])])):(0,t.kq)("",!0)]),m])}a(7658);var g={data(){return{docMenu:{},docProp:{label:"name",children:"children"},annMenu:{},docName:""}},created(){this.getDocumentMenu()},methods:{clickUpload(){this.$refs.file.click()},onChange(){const e=this.$refs.file?.files[0],n=new FormData;n.append("file",e),this.$api.docUpload(n).then((e=>{this.$message.success(e.data.msg),this.getDocumentMenu()}))},getDocumentMenu(){this.$api.documentMenu({getWhat:"catalog"}).then((e=>{this.docMenu=JSON.parse(e.data.catalog)}))},docNodeClick(e,n){if("leaf"==e.type){let a=n.parent.data.name+"/"+e.name;console.log(a),this.docName=a,this.getAnnMenu(a)}},getAnnMenu(e){const n=new FormData;n.append("pathname",e),this.$api.annMenu(n).then((e=>{this.annMenu=JSON.parse(e.data.annCatalog)}))},annNodeClick(e){let n=this.docName.split("/")[0]+"/"+e.name;this.$router.push({path:"mark",query:{doc:JSON.stringify(this.docName),ann:JSON.stringify(n)}})}}},f=a(3744);const C=(0,f.Z)(g,[["render",k]]);var N=C}}]);